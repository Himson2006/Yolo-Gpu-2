<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Search Videos</title>
  <style>
    /* simple styling */
    .video-item { margin-bottom: 2rem; }
    .video-player { display: none; margin-top: 0.5rem; }
  </style>
</head>
<body>
  <h1>Search Videos</h1>
  <form action="{{ url_for('main.search_videos') }}" method="get">
    <label>
      Class name:
      <input type="text" name="class_name" value="{{ class_name or '' }}">
    </label>
    <label>
      Min count:
      <input type="number" name="min_count" value="{{ min_count or '' }}">
    </label>
    <button type="submit">Search</button>
  </form>

  {% if events %}
    <ul>
      {% for event in events %}
        <li class="video-item">
          <strong>{{ event.event_id }}</strong>
          <button type="button"
                  onclick="toggleFrame('{{ event.event_id }}')">
            â–¶ Play
          </button>

          <iframe
+            id="iframe-{{ event.event_id }}"
+            src="{{ url_for('main.player_page', event_id=event.event_id) }}"
+            width="480"
+            height="270"
+            style="display:none; border:0;"
+            allow="autoplay"
+          ></iframe>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p><em>No videos found.</em></p>
  {% endif %}

<script>
  function toggleFrame(id) {
    console.log("toggleFrame called for", id);
    const frame = document.getElementById(`iframe-${id}`);
    if (frame.style.display === 'none' || !frame.style.display) {
      frame.style.display = 'block';
    } else {
      frame.style.display = 'none';
    }
  }
</script>

</body>
</html>